<!doctype html>
<html lang="tr">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>{{ page.title }} â€” Kagan BaÄŸdemir</title>
  <script>
  (function(){
    try{
      const stored=localStorage.getItem('theme-preference');
      const systemDark=window.matchMedia&&window.matchMedia('(prefers-color-scheme: dark)').matches;
      const theme=stored||(systemDark?'dark':'light');
      document.documentElement.dataset.theme=theme;
    }catch(e){
      document.documentElement.dataset.theme='dark';
    }
  })();
  </script>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="/assets/theme.css">
  <meta name="color-scheme" content="light dark">
  <!-- Plausible -->
  <script defer data-domain="kaganbagdemir.de" src="https://plausible.io/js/script.js"></script>
</head>
<body>
  <main class="max-w-3xl mx-auto px-6 py-10">
    <header class="flex items-center justify-between">
      <a href="/blog/" class="text-sm theme-text-muted transition">&larr; <span data-i18n="post.back"></span></a>
      <div class="flex items-center gap-2">
        <button onclick="setLang('tr')" class="px-3 py-1 rounded-full border theme-button">TR</button>
        <button onclick="setLang('de')" class="px-3 py-1 rounded-full border theme-button">DE</button>
        <button onclick="setLang('en')" class="px-3 py-1 rounded-full border theme-button">EN</button>
        <button id="theme-toggle" class="w-10 h-10 rounded-full border theme-button-icon" type="button">
          <span data-theme-icon aria-hidden="true">ðŸŒ™</span>
          <span class="sr-only" data-i18n="btn.theme"></span>
        </button>
      </div>
    </header>

    <article class="mt-6">
      <h1 class="text-3xl font-semibold">{{ page.title }}</h1>
      <p class="theme-text-muted text-sm mt-1">
        {{ page.date | date: "%d.%m.%Y" }}
      </p>

      <!-- Ã‡ok dilli iÃ§erik -->
      <div id="post-tr" class="prose theme-prose mt-6 max-w-none" style="display:none;">
        {% if page.tr %}{{ page.tr | markdownify }}{% endif %}
      </div>
      <div id="post-de" class="prose theme-prose mt-6 max-w-none" style="display:none;">
        {% if page.de %}{{ page.de | markdownify }}{% endif %}
      </div>
      <div id="post-en" class="prose theme-prose mt-6 max-w-none" style="display:none;">
        {% if page.en %}{{ page.en | markdownify }}{% endif %}
      </div>

      <!-- Fallback: tek dilli iÃ§erik -->
      <div id="post-default" class="prose theme-prose mt-6 max-w-none" style="display:none;">
        {{ content }}
      </div>
    </article>

    <footer class="mt-10 border-t theme-border pt-5 theme-text-muted text-sm">
      Â© {{ "now" | date: "%Y" }} Kagan BaÄŸdemir Â· <a href="/#impressum">Impressum</a>
    </footer>
  </main>

<script src="/assets/i18n.js"></script>
<script>
const STRINGS=(window.I18N_STRINGS&&window.I18N_STRINGS.post)||{};
function apply(lang){
  document.documentElement.lang=lang;
  localStorage.setItem('lang',lang);
  const table=STRINGS[lang]||{};
  document.querySelectorAll('[data-i18n]').forEach(el=>{
    const key=el.dataset.i18n;
    if(table[key]){
      el.textContent=table[key];
    }
  });
  // Ä°Ã§erik gÃ¶rÃ¼nÃ¼rlÃ¼ÄŸÃ¼:
  const blocks={tr:document.getElementById('post-tr'),de:document.getElementById('post-de'),en:document.getElementById('post-en')};
  const toggle=document.getElementById('theme-toggle');
  if(toggle){
    const label=table['btn.theme'];
    if(label){
      toggle.setAttribute('aria-label',label);
      toggle.setAttribute('title',label);
    }
  }
  const any=Object.values(blocks).some(b=>b && b.innerHTML.trim().length>0);
  if(any){ Object.values(blocks).forEach(b=>b&&(b.style.display='none')); if(blocks[lang] && blocks[lang].innerHTML.trim()){blocks[lang].style.display='';} else { // fallback sÄ±rayla
      (blocks.tr&&blocks.tr.innerHTML.trim()?blocks.tr:blocks.de&&blocks.de.innerHTML.trim()?blocks.de:blocks.en&&blocks.en.innerHTML.trim()?blocks.en:document.getElementById('post-default')).style.display='';
    }} else { document.getElementById('post-default').style.display=''; }
}
function setLang(l){apply(l);}
apply(localStorage.getItem('lang')||'tr');
</script>
<script src="/assets/theme.js"></script>
</body>
</html>
